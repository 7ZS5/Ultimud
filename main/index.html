<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>

<style>

* {
    padding: 0px;
    margin: 0px;
    box-sizing: border-box;
    color: rgb(0, 255, 0);
    font-size: 18px;
}

::-webkit-scrollbar {
    background: none;
    width: 10px;
}

::-webkit-scrollbar-thumb {
    background-image: radial-gradient(rgb(85, 85, 85), rgb(27, 27, 27));
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background-image: radial-gradient(rgb(99, 99, 99), rgb(39, 39, 39));
}

#main {
    padding: 10px;
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(rgb(112, 112, 112), rgb(17, 17, 17));
}

#column1 {
    position: fixed;
    top: 20px;
    left: 650px;
}

#output {
    border: 1px solid black;
    width: 600px;
    height: 400px;
    overflow: auto;
    word-wrap: break-word;
    padding-left: 5px;
    padding-top: 5px;
}

#input {
    background-color: transparent;
    border: none;
    border: 1px solid black;
    width: 500px;
    outline: none;
}

#contThemeChanger {
    position: fixed;
    top: 10px;
    right: 10px;
}

.contColumn {
    display: flex;
    flex-direction: column;
}

.contRow {
    display: flex;
    flex-direction: row;
}

.outputMessage {
    background-color: darkblue;
}

.p1 {
    margin-left: 7px;
}

</style>

</head>

<body>

<div id="main">

<div id="column1" class="contColumn">

    <div id="row1" class="contRow">

        <div class="contColumn" style="margin-left: 50px;">

            <div class="contRow">Name:
                <p id="name" class="p1">none</p>
            </div>

            <div class="contRow">Ancestry:
                <p id="ancestry" class="p1">none</p>
            </div>

            <div class="contRow">Job:
                <p id="job" class="p1">none</p>
            </div>

            <div class="contRow">Level:
                <p id="level" class="p1">1</p>
            </div>

            <div class="contRow">Exp:
                <p id="exp" class="p1">0</p>
            </div>

            <div class="contRow">Hp:
                <p id="hp" class="p1">100</p>
            </div>

            <div class="contRow">Mp:
                <p id="mp" class="p1">0</p>
            </div>

            <div class="contRow">Ep:
                <p id="ep" class="p1">0</p>
            </div>

            <div class="contRow">Fatigue:
                <p id="fatigue" class="p1">50</p>
            </div>
            
        </div>

        <div class="contColumn" style="margin-left: 50px;">Inventory:
            <p class="invItem">none</p>
        </div>

        <div class="contColumn" style="margin-left: 50px;">Skills:
            <p class="skill">none</p>
        </div>

        <div class="contColumn" style="margin-left: 50px;">Spells:
            <p class="spell">none</p>
        </div>

        <div class="contColumn" style="margin-left: 50px;">Equipment:

            <div class="contRow">Head:
                <p id="head" class="p1">none</p>
            </div>

            <div class="contRow">Torso:
                <p id="torso" class="p1">none</p>
            </div>

            <div class="contRow">Legs:
                <p id="legs" class="p1">none</p>
            </div>

            <div class="contRow">Hands:
                <p id="hands" class="p1">none</p>
            </div>

            <div class="contRow">Feet:
                <p id="feet" class="p1">none</p>
            </div>

        </div>

    </div>

    <div id="row2" class="contRow" style="margin-top: 50px;">

        <div class="contColumn" style="margin-left: 50px;">

            <div class="contRow">Weapon1:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Weapon2:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Weapon3:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Weapon4:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Ammo:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Shield:
                <p class="p1">none</p>
            </div>

            <div class="contRow">ShieldBack:
                <p class="p1">none</p>
            </div>

        </div>

        <div class="contColumn" style="margin-left: 50px;">

            <div class="contRow">bodyType:
                <p class="p1">none</p>
            </div>

            <div class="contRow">Height:
                <p class="p1">none</p>
            </div>

            <div class="contRow">skinTone:
                <p class="p1">none</p>
            </div>

            <div class="contRow">hairStyle:
                <p class="p1">none</p>
            </div>

            <div class="contRow">facialHairStyle:
                <p class="p1">none</p>
            </div>

            <div class="contRow">hairColor:
                <p class="p1">none</p>
            </div>

            <div class="contRow">eyeColor:
                <p class="p1">none</p>
            </div>

        </div>

    </div>

    <div id="row3" class="contRow" style="margin-top: 50px;">

        <div class="contColumn" style="margin-left: 50px;">

            <div class="contRow">currentRoom:
                <p id="currentRoom" class="p1">none</p>
            </div>
        
            <div class="contRow">currentTarget:
                <p id="lastTarget" class="p1">none</p>
            </div>

            <div class="contRow">North:
                <p id="north" class="p1">none</p>
            </div>

            <div class="contRow">East:
                <p id="east" class="p1">none</p>
            </div>

            <div class="contRow">South:
                <p id="south" class="p1">none</p>
            </div>

            <div class="contRow">West:
                <p id="west" class="p1">none</p>
            </div>
            
        </div>

    </div>
    
</div>

<div id="output"></div>

<input id="input" type="text">

<div id="contThemeChanger">Theme:
    <select name="themeChanger" id="themeChanger" style="background: rgb(33, 33, 33);">
        <option value="matrix">matrix</option>
        <option value="ocean">ocean</option>
        <option value="yinyang">yinyang</option>
        <option value="parchment">parchment</option>
    </select>
</div>

</div>

<script>

/* LEGEND
opt: option
cur: current
st: state
str: string
int: integer
ele: element
*/

//options, states, variables data map, element references

const eleOutput = document.getElementById('output'),
      eleInput = document.getElementById('input')
      eleTheme = document.getElementById('themeChanger')

let stateMap = {

        //intro menu
        createOrChoose: {type: 'opt',
                         text: "Create or choose a character.",
                         options: [{text: "Choose.", next: 'chooseCharacter'},
                                   {text: "Create.", next: 'chooseAncestry'}]},

        chooseCharacter: {type: 'opt', 
                          text: "Choose your character.", 
                          options: []},

        //character creation
        chooseAncestry: {type: 'opt', 
                         text: "Choose your character's ancestry.", 
                         options: [{text: "Human", next: 'nameCharacter'}, 
                                   {text: "Dwarf", next: 'nameCharacter'}, 
                                   {text: "Elf", next: 'nameCharacter'},
                                   {text: "Half-giant", next: 'nameCharacter'},
                                   {text: "Halfling", next: 'nameCharacter'}]},

        nameCharacter: {type: 'assign',
                        text: "What will your character's name be?", 
                        arg: 'name',
                        next: 'bodyType'},

        //appearance
        bodyType: {type: 'opt',
                   text: "Choose body type.",
                   options: [{text: "Fat", next: 'height'},
                             {text: "Muscular", next: 'height'},
                             {text: "Thin", next: 'height'},
                             {text: "Average", next: 'height'}]},

        height: {type: 'opt', 
                 text: "Choose height.",
                 options: [{text: "Tall", next: 'skinTone'},
                           {text: "Short", next: 'skinTone'},
                           {text: "Average", next: 'skinTone'}]},

        skinTone: {type: 'opt',
                   text: "Choose skin tone.", 
                   options: [{text: "Tan", next: 'hairStyle'},
                             {text: "Dark", next: 'hairStyle'},
                             {text: "Fair", next: 'hairStyle'},
                             {text: "Pale", next: 'hairStyle'}]},

        hairStyle: {type: 'opt', 
                    text: "Choose hair style.", 
                    options: [{text: "Long", next: 'facialHairStyle'},
                              {text: "Short", next: 'facialHairStyle'},
                              {text: "Mohawk", next: 'facialHairStyle'},
                              {text: "Bald", next: 'facialHairStyle'},
                              {text: "Shaved", next: 'facialHairStyle'},
                              {text: "Mullet", next: 'facialHairStyle'},
                              {text: "Spiked", next: 'facialHairStyle'},
                              {text: "Braided", next: 'facialHairStyle'}]},

        facialHairStyle: {type: 'opt', 
                          text: "Choose facial hair style.", 
                          options: [{text: "Long beard", next: 'hairColor'},
                                    {text: "Short beard", next: 'hairColor'},
                                    {text: "Clean shaven", next: 'hairColor'},
                                    {text: "Mustache", next: 'hairColor'},
                                    {text: "Soul patch", next: 'hairColor'},
                                    {text: "Mutton chops", next: 'hairColor'},
                                    {text: "Goatee", next: 'hairColor'}]},

        hairColor: {type: 'opt',
                    text: "Choose hair color.", 
                    options: [{text: "Black", next: 'eyeColor'},
                              {text: "Brown", next: 'eyeColor'},
                              {text: "Blonde", next: 'eyeColor'},
                              {text: "Red", next: 'eyeColor'},
                              {text: "Grey", next: 'eyeColor'}]},

        eyeColor: {type: 'opt', 
                   text: "Choose eye color.", 
                   options: [{text: "Black", next: 'createOrChoose'},
                             {text: "Brown", next: 'createOrChoose'},
                             {text: "Red", next: 'createOrChoose'},
                             {text: "Blue", next: 'createOrChoose'},
                             {text: "Green", next: 'createOrChoose'},
                             {text: "Yellow", next: 'createOrChoose' },
                             {text: "White", next: 'createOrChoose'}]}
}

let character = {
    name: "default",
    ancestry: "default"
}

//prints current input state text and options if any

let stCur = stateMap['createOrChoose']
function printSt() { 
    eleOutput.innerHTML += `${stCur.text}<br>`

    if (stCur.type === 'opt') {
        let i = 1

        for (x in stCur.options) {
            eleOutput.innerHTML += `<br>${i}. ${stCur.options[x].text}`
            i++
        }

        eleOutput.innerHTML += "<br>"
}

    eleOutput.innerHTML += "<br>"
    eleOutput.scrollTop = eleOutput.scrollHeight
}

function assign(para1) {
    para1 = userInput
}

function validate(para1) {
    if (para1 === userInput) {
        return true
    }

    return false
}

//user input for commands

let userInput
eleInput.addEventListener('keyup', (event) => {

    if (event.key === 'Enter' & eleInput.value != '') {
        userInput = eleInput.value
        eleInput.value = ""

        if (! isNaN(userInput)) {
            userInput = parseInt(userInput)
        }
        
        //checks if the current input state is an options, string, or int type
        //and then prints the text of that input state

        switch (stCur.type) {

            case 'opt':
                let optChoice = stCur['options'][userInput-1]

                if (isNaN(userInput)) {
                    break
                }

                if (optChoice.func) {
                    funcMap[optChoice.func]()
                }

                stCur = stateMap[optChoice.next]
                printSt()
                break

            case 'assign':

                assign(stCur.arg)
                stCur = stateMap[stCur.next]
                console.log(character['ancestry'])
                printSt()
                break
            
            case 'validate':

                if (isNaN(userInput)) {

                    if (funcMap[stCur.func]() === true) {
                        stCur = stateMap[stCur.next]
                        printSt()
                        break
                    }

                break
                }
        }
    }
})

//player movement

function moveNorth() {
    if (myGamePiece.y > 0) {
        myGamePiece.y -= 1
    }
}

function moveEast() {
    if (myGamePiece.x < 25) {
        myGamePiece.x += 1
    }
}

function moveSouth() {
    if (myGamePiece.y < 25) {
        myGamePiece.y += 1
    }
}

function moveWest() {
    if (myGamePiece.x > 0) {
        myGamePiece.x -= 1
    }
}

//movement key detection

document.addEventListener('keyup', function(event) {

    if (event.keyCode == 38) {
        moveNorth()
    }

    else if (event.keyCode == 39) {
        moveEast()
    }

    else if (event.keyCode == 40) {
        moveSouth()
    }

    else if (event.keyCode == 37) {
        moveWest()
    }
})

//changes the color theme for the whole UI

let elementList
eleTheme.addEventListener('change', (event) => {

    switch (event.target.value) {

        case 'matrix': 
        
            document.getElementById('main').style.backgroundImage = 'linear-gradient(rgb(112, 112, 112), rgb(17, 17, 17))'
            document.getElementById('themeChanger').style.backgroundColor = 'rgb(33, 33, 33)'
            elementList = document.querySelectorAll('*')

            elementList.forEach( ele => {
                ele.style.color = 'rgb(0, 255, 0)'
            })

            break

        case 'ocean': 
            
            document.getElementById('main').style.backgroundImage = 'linear-gradient(rgb(0, 2, 69), rgb(0, 0, 0))'
            document.getElementById('themeChanger').style.backgroundColor = 'rgb(0, 2, 69)'
            elementList = document.querySelectorAll('*')

            elementList.forEach( ele => {
                ele.style.color = 'rgb(50, 255, 255)'
            })

            break

        case 'yinyang':
            
            document.getElementById('main').style.backgroundImage = 'linear-gradient(rgb(0, 0, 0), rgb(150, 150, 150)'
            document.getElementById('themeChanger').style.backgroundColor = 'rgb(0, 0, 0)'
            elementList = document.querySelectorAll('*')

            elementList.forEach( ele => {
                ele.style.color = 'rgb(255, 255, 255)'
            })

            break

        case 'parchment':
            
            document.getElementById('main').style.backgroundImage = 'linear-gradient(rgb(145, 124, 93), rgb(145, 124, 93)'
            document.getElementById('themeChanger').style.backgroundColor = 'rgb(145, 124, 93)'
            elementList = document.querySelectorAll('*')

            elementList.forEach( ele => {
                ele.style.color = 'rgb(0, 0, 0)'
            })

            break
    }
})

printSt()

</script>

</body>

</html>